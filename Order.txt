import java.util.*;
import java.util.function.Function;

class Order {
    private List<Product> cart = new ArrayList<>();

    public void addProduct(Product product) {
        cart.add(product);
    }

    public double calculateTotal() {
        return cart.stream()
                .mapToDouble(Product::getPrice)
                .sum();
    }

    public double applyCharges(
            Function<Double, Double> tax,
            Function<Double, Double> shipping,
            Function<Double, Double> discount) {

        double subtotal = calculateTotal();
        return discount.apply(
                shipping.apply(
                        tax.apply(subtotal)
       )
     );
    }

    public List<Product> getCart() {
        return cart;
    }
}
